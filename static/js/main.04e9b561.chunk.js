(this.webpackJsonpdelivery_app=this.webpackJsonpdelivery_app||[]).push([[0],{140:function(e,t,a){},142:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(36),i=a.n(r),c=(a(140),a(17)),o=a.n(c),l=a(23),d=a(11),j=a(112),u=a(30),m=a(14),h=(a(142),a(3)),x=a(58),b=Object(n.createContext)(),p=a(211),g=a(226),O=a(230),f=a(228),v=a(227),y=a(224),C=a(217),w=a(229),k=a(215),S=a(221),W=a(223),D=a(111),F=a(219),I=a(220),q=a(212),B=a(225),T=a(214),N=Object(n.createContext)(),P=a(1);function U(e){n.useContext(N);return Object(P.jsxs)(n.Fragment,{children:[Object(P.jsx)(W.a,{variant:"h6",gutterBottom:!0,children:"Shipping address"}),Object(P.jsxs)(I.a,{container:!0,spacing:3,children:[Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,id:"firstname",name:"firstName",onChange:function(t){e.onChange(t.target.id,t.target.value)},label:"First name",fullWidth:!0,autoComplete:"given-name",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,id:"lastname",name:"lastName",onChange:function(t){e.onChange(t.target.id,t.target.value)},label:"Last name",fullWidth:!0,autoComplete:"family-name",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,children:Object(P.jsx)(q.a,{required:!0,id:"address",onChange:function(t){e.onChange(t.target.id,t.target.value)},name:"address1",label:"Address line 1",fullWidth:!0,autoComplete:"shipping address-line1",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,children:Object(P.jsx)(q.a,{id:"address2",name:"address2",label:"Address line 2",fullWidth:!0,autoComplete:"shipping address-line2",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,id:"city",onChange:function(t){e.onChange(t.target.id,t.target.value)},name:"city",label:"City",fullWidth:!0,autoComplete:"shipping address-level2",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{id:"state",onChange:function(t){e.onChange(t.target.id,t.target.value)},name:"state",label:"State/Province/Region",fullWidth:!0,variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,id:"zipcode",onChange:function(t){e.onChange(t.target.id,t.target.value)},name:"zip",label:"Zip / Postal code",fullWidth:!0,autoComplete:"shipping postal-code",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,id:"country",onChange:function(t){e.onChange(t.target.id,t.target.value)},name:"country",label:"Country",fullWidth:!0,autoComplete:"shipping country",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,id:"goodstype",onChange:function(t){e.onChange(t.target.id,t.target.value)},name:"goods",label:"Goods details",fullWidth:!0,autoComplete:"shipping goods",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,children:Object(P.jsx)(B.a,{control:Object(P.jsx)(T.a,{color:"secondary",name:"saveAddress",value:"yes"}),label:"Use this address for payment details"})})]})]})}function R(e){n.useContext(N);return Object(P.jsxs)(n.Fragment,{children:[Object(P.jsx)(W.a,{variant:"h6",gutterBottom:!0,children:"Destination address"}),Object(P.jsxs)(I.a,{container:!0,spacing:3,children:[Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,id:"firstname",name:"firstName",onChange:function(t){e.onChange(t.target.id,t.target.value)},label:"First name",fullWidth:!0,autoComplete:"given-name",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,id:"lastname",name:"lastName",onChange:function(t){e.onChange(t.target.id,t.target.value)},label:"Last name",fullWidth:!0,autoComplete:"family-name",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,children:Object(P.jsx)(q.a,{required:!0,id:"address",onChange:function(t){e.onChange(t.target.id,t.target.value)},name:"address1",label:"Address line 1",fullWidth:!0,autoComplete:"shipping address-line1",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,children:Object(P.jsx)(q.a,{id:"address2",name:"address2",label:"Address line 2",fullWidth:!0,autoComplete:"shipping address-line2",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,id:"city",onChange:function(t){e.onChange(t.target.id,t.target.value)},name:"city",label:"City",fullWidth:!0,autoComplete:"shipping address-level2",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{id:"state",onChange:function(t){e.onChange(t.target.id,t.target.value)},name:"state",label:"State/Province/Region",fullWidth:!0,variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,id:"zipcode",onChange:function(t){e.onChange(t.target.id,t.target.value)},name:"zip",label:"Zip / Postal code",fullWidth:!0,autoComplete:"shipping postal-code",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,id:"country",onChange:function(t){e.onChange(t.target.id,t.target.value)},name:"country",label:"Country",fullWidth:!0,autoComplete:"shipping country",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,id:"goodstype",onChange:function(t){e.onChange(t.target.id,t.target.value)},name:"goods",label:"Goods details",fullWidth:!0,autoComplete:"shipping goods",variant:"standard"})}),Object(P.jsx)(I.a,{item:!0,xs:12,children:Object(P.jsx)(B.a,{control:Object(P.jsx)(T.a,{color:"secondary",name:"saveAddress",value:"yes"}),label:"Use this address for payment details"})})]})]})}var A=a(232),L=a(216),E=a(233),M=a(18),z=a.n(M);z.a.defaults.baseURL="http://localhost:8000";var $=[{name:"Product 1",desc:"A nice thing",price:"$9.99"},{name:"Product 2",desc:"Another thing",price:"$3.45"},{name:"Product 3",desc:"Something else",price:"$6.51"},{name:"Product 4",desc:"Best thing of all",price:"$14.11"},{name:"Shipping",desc:"",price:"Free"}];function G(){var e=n.useState(),t=Object(d.a)(e,2),a=t[0],s=t[1],r=n.useState([]),i=Object(d.a)(r,2),c=i[0],j=i[1],u=n.useState([]),h=Object(d.a)(u,2),x=h[0],b=h[1],p=Object(m.g)().id;console.log(p);return n.useEffect((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("/getsingleorder",{id:p});case 2:t=e.sent,console.log(t.data),t.data&&(s(t.data),j([t.data.sendersDetails.address,t.data.sendersDetails.city,t.data.sendersDetails.state,t.data.sendersDetails.zipcode,t.data.sendersDetails.country]),b([{name:t.data.recieversDetails.firstname,detail:t.data.recieversDetails.address}]));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(P.jsxs)(n.Fragment,{children:[Object(P.jsx)(W.a,{variant:"h6",gutterBottom:!0,children:"Order summary"}),Object(P.jsxs)(A.a,{disablePadding:!0,children:[$.map((function(e){return Object(P.jsxs)(L.a,{sx:{py:1,px:0},children:[Object(P.jsx)(E.a,{primary:e.name,secondary:e.desc}),Object(P.jsx)(W.a,{variant:"body2",children:e.price})]},e.name)})),Object(P.jsxs)(L.a,{sx:{py:1,px:0},children:[Object(P.jsx)(E.a,{primary:"Total"}),Object(P.jsx)(W.a,{variant:"subtitle1",sx:{fontWeight:700},children:"$34.06"})]})]}),Object(P.jsxs)(I.a,{container:!0,spacing:2,children:[Object(P.jsxs)(I.a,{item:!0,xs:12,sm:6,children:[Object(P.jsx)(W.a,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Shipping"}),Object(P.jsx)(W.a,{gutterBottom:!0,children:void 0===a||null===a?"":a.sendersDetails.firstname}),Object(P.jsx)(W.a,{gutterBottom:!0,children:c.join(", ")})]}),Object(P.jsxs)(I.a,{item:!0,container:!0,direction:"column",xs:12,sm:6,children:[Object(P.jsx)(W.a,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Destination details"}),Object(P.jsx)(I.a,{container:!0,children:x.map((function(e){return Object(P.jsxs)(n.Fragment,{children:[Object(P.jsx)(I.a,{item:!0,xs:6,children:Object(P.jsx)(W.a,{gutterBottom:!0,children:e.name})}),Object(P.jsx)(I.a,{item:!0,xs:6,children:Object(P.jsx)(W.a,{gutterBottom:!0,children:e.detail})})]},e.name)}))})]})]})]})}z.a.defaults.baseURL="http://localhost:8000";var J=Object(D.a)();function V(){var e=["Shipping address","Destination details","Review your order"],t=(n.useContext(b),n.useState({firstname:"",lastname:"",address:"",city:"",state:"",zipcode:"",country:"",goodstype:""})),a=Object(d.a)(t,2),s=a[0],r=a[1],i=n.useState({firstname:"",lastname:"",address:"",city:"",state:"",zipcode:"",country:"",goodstype:""}),c=Object(d.a)(i,2),j=c[0],u=c[1];function D(e,t){u(Object(x.a)(Object(x.a)({},j),{},Object(h.a)({},e,t))),console.log(j)}function I(e,t){r(Object(x.a)(Object(x.a)({},s),{},Object(h.a)({},e,t))),console.log(s)}var q=n.useContext(N),B=n.useState(0),T=Object(d.a)(B,2),A=T[0],L=T[1],E=n.useState(0),M=Object(d.a)(E,2),$=M[0],V=M[1],Z=Object(m.f)(),_=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===s&&q({type:"flashMessage",value:"Can't be empty"}),2!=A){e.next=6;break}return e.next=4,z.a.post("/create",{sendersDetails:s,recieversDetails:j});case 4:a=e.sent,V(a.data);case 6:L(A+1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){L(A-1)};return Object(P.jsxs)(F.a,{theme:J,children:[Object(P.jsx)(p.a,{}),Object(P.jsx)(g.a,{position:"absolute",color:"default",elevation:0,sx:{position:"relative",borderBottom:function(e){return"1px solid ".concat(e.palette.divider)}},children:Object(P.jsxs)(v.a,{children:[Object(P.jsx)(W.a,{variant:"h6",color:"inherit",noWrap:!0,children:"Company name"}),Object(P.jsx)(S.a,{onClick:function(){q({type:"logout"}),Z("/")},style:{marginLeft:"100px"},variant:"contained",children:"Logout"})]})}),Object(P.jsx)(f.a,{style:{zIndex:"-10"},component:"main",maxWidth:"sm",sx:{mb:4},children:Object(P.jsxs)(y.a,{variant:"outlined",sx:{my:{xs:3,md:6},p:{xs:2,md:3}},children:[Object(P.jsx)(W.a,{component:"h1",variant:"h4",align:"center",children:"Checkout"}),Object(P.jsx)(C.a,{activeStep:A,sx:{pt:3,pb:5},children:e.map((function(e){return Object(P.jsx)(w.a,{children:Object(P.jsx)(k.a,{children:e})},e)}))}),Object(P.jsx)(n.Fragment,{children:A===e.length?Object(P.jsxs)(n.Fragment,{children:[Object(P.jsx)(W.a,{variant:"h5",gutterBottom:!0,children:"Thank you for your order."}),Object(P.jsxs)(W.a,{variant:"subtitle1",children:["Your order number is ",$,". We have emailed your order confirmation, and will send you an update when your order has shipped."]}),Object(P.jsx)(S.a,{onClick:Q,sx:{mt:3,ml:1},children:"Back"})]}):Object(P.jsxs)(n.Fragment,{children:[function(e){switch(e){case 0:return Object(P.jsx)(U,{onChange:I});case 1:return Object(P.jsx)(R,{onChange:D});case 2:return Object(P.jsx)(G,{});default:throw new Error("Unknown step")}}(A),Object(P.jsxs)(O.a,{sx:{display:"flex",justifyContent:"flex-end"},children:[0!==A&&Object(P.jsx)(S.a,{onClick:Q,sx:{mt:3,ml:1},children:"Back"}),Object(P.jsx)(S.a,{variant:"contained",onClick:_,sx:{mt:3,ml:1},children:A===e.length-1?"Place order":"Next"})]})]})})]})})]})}var Z=a(222),_=a(73),Q=a.n(_);z.a.defaults.baseURL="http://localhost:8000";var Y=Object(D.a)();function H(){var e=n.useContext(N),t=n.useState(),a=Object(d.a)(t,2),s=a[0],r=a[1],i=n.useState(),c=Object(d.a)(i,2),j=c[0],h=c[1],x=(Object(m.f)(),function(){var t=Object(l.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log(s),console.log(j),t.next=5,z.a.post("/login",{email:s,password:j});case 5:n=t.sent,console.log(n.data),"user"===n.data.role?(e({type:"login",data:n.data,role:"user"}),e({type:"flashMessage",value:"Welcome to booking app"})):"admin"===s&&"admin"===j&&(e({type:"login",data:n.data,role:"admin"}),e({type:"flashMessage",value:"Welcome to admin page"}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return Object(P.jsx)(F.a,{theme:Y,children:Object(P.jsxs)(f.a,{component:"main",maxWidth:"xs",children:[Object(P.jsx)(p.a,{}),Object(P.jsxs)(O.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(P.jsx)(Z.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(P.jsx)(Q.a,{})}),Object(P.jsx)(W.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(P.jsxs)(O.a,{component:"form",onSubmit:x,noValidate:!0,sx:{mt:1},children:[Object(P.jsx)(q.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",value:s,onChange:function(e){r(e.target.value),console.log(e.target.value)},label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(P.jsx)(q.a,{margin:"normal",required:!0,fullWidth:!0,value:j,onChange:function(e){h(e.target.value)},name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(P.jsx)(B.a,{control:Object(P.jsx)(T.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(P.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(P.jsxs)(I.a,{container:!0,children:[Object(P.jsx)(I.a,{item:!0,xs:!0,children:Object(P.jsx)(u.b,{to:"/",variant:"body2",children:"Forgot password?"})}),Object(P.jsx)(I.a,{item:!0,children:Object(P.jsx)(u.b,{to:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})]})})}var K=a(231);var X=function(){var e=Object(m.f)(),t=Object(n.useState)(),a=Object(d.a)(t,2),s=a[0],r=a[1],i=(Object(n.useContext)(b),Object(n.useContext)(N)),c=function(t){t.preventDefault(),e("/details/".concat(t.target.id))};return Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("/orders");case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),console.log(s),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h2",{children:"REQUESTS"}),void 0===s?"":s.map((function(e){return Object(P.jsx)(K.a,{elevation:4,style:{minWidth:"400px"},children:Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",margin:"5px"},children:[Object(P.jsxs)("h4",{children:["Name:",e.name]}),Object(P.jsxs)("h4",{children:["Source:",e.source]}),Object(P.jsxs)("h4",{children:["Destination:",e.destination]}),Object(P.jsxs)("h4",{children:["Goodstype: ",e.goodstype]}),Object(P.jsxs)("h4",{children:["Status: ",e.status]}),Object(P.jsx)(S.a,{id:e.orderno,onClick:c,children:"more details"})]})})})),Object(P.jsx)(S.a,{onClick:function(){i({type:"logout"}),e("/")},style:{marginTop:"100px"},variant:"contained",children:"Logout"})]})};z.a.defaults.baseURL="http://localhost:8000";var ee=Object(D.a)();function te(){var e=n.useContext(N),t=Object(m.f)(),a=function(){var a=Object(l.a)(o.a.mark((function a(n){var s,r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),s=new FormData(n.currentTarget),a.next=4,z.a.post("/register",{firstname:s.get("firstName"),lastname:s.get("lastName"),email:s.get("email"),password:s.get("password"),aadharno:s.get("aadhar")});case 4:(r=a.sent).data&&(e({type:"login",data:r.data,role:"user"}),t("/"));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(P.jsx)(F.a,{theme:ee,children:Object(P.jsxs)(f.a,{component:"main",maxWidth:"xs",children:[Object(P.jsx)(p.a,{}),Object(P.jsxs)(O.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(P.jsx)(Z.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(P.jsx)(Q.a,{})}),Object(P.jsx)(W.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(P.jsxs)(O.a,{component:"form",noValidate:!0,onSubmit:a,sx:{mt:3},children:[Object(P.jsxs)(I.a,{container:!0,spacing:2,children:[Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})}),Object(P.jsx)(I.a,{item:!0,xs:12,sm:6,children:Object(P.jsx)(q.a,{required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name"})}),Object(P.jsx)(I.a,{item:!0,xs:12,children:Object(P.jsx)(q.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})}),Object(P.jsx)(I.a,{item:!0,xs:12,children:Object(P.jsx)(q.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})}),Object(P.jsx)(I.a,{item:!0,xs:12,children:Object(P.jsx)(q.a,{required:!0,fullWidth:!0,name:"aadhar",label:"Aadhar no",type:"aadhar",id:"aadhar",autoComplete:"new-aadhar"})})]}),Object(P.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(P.jsx)(I.a,{container:!0,justifyContent:"flex-end",children:Object(P.jsx)(I.a,{item:!0,children:Object(P.jsx)(u.b,{to:"/",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})})}z.a.defaults.baseURL="http://localhost:8000";var ae=Object(D.a)();function ne(){var e=n.useContext(N),t=Object(m.f)(),a=Object(m.g)().id;console.log(a);var s=function(){var n=Object(l.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.a.post("/changestatus",{id:a});case 2:n.sent,e({type:"flashMessage",value:"Order booked successfully"}),t("/");case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),r=function(){var n=Object(l.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.a.post("/deleteorder",{id:a});case 2:n.sent,e({type:"flashMessage",value:"Order deleted successfully"}),t("/");case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(P.jsxs)(F.a,{theme:ae,children:[Object(P.jsx)(p.a,{}),Object(P.jsx)(g.a,{position:"absolute",color:"default",elevation:0,sx:{position:"relative",borderBottom:function(e){return"1px solid ".concat(e.palette.divider)}},children:Object(P.jsx)(v.a,{children:Object(P.jsx)(W.a,{variant:"h6",color:"inherit",noWrap:!0,children:"Company name"})})}),Object(P.jsx)(f.a,{component:"main",maxWidth:"sm",sx:{mb:4},children:Object(P.jsxs)(y.a,{variant:"outlined",sx:{my:{xs:3,md:6},p:{xs:2,md:3}},children:[Object(P.jsx)(W.a,{component:"h1",variant:"h4",align:"center",children:"Order Details"}),Object(P.jsx)(n.Fragment,{children:2===["Shipping address","Destination details","Review your order"].length?Object(P.jsxs)(n.Fragment,{children:[Object(P.jsx)(W.a,{variant:"h5",gutterBottom:!0,children:"Thank you for your order."}),Object(P.jsx)(W.a,{variant:"subtitle1",children:"order number is #2001539. We have emailed your order confirmation, and will send you an update when your order has shipped."})]}):Object(P.jsxs)(n.Fragment,{children:[function(e){switch(e){case 0:return Object(P.jsx)(U,{});case 1:return Object(P.jsx)(R,{});case 2:return Object(P.jsx)(G,{});default:throw new Error("Unknown step")}}(2),Object(P.jsxs)(O.a,{sx:{display:"flex",justifyContent:"flex-end"},children:[Object(P.jsx)(S.a,{onClick:function(){t("/")},sx:{mt:3,ml:1},children:"Back"}),Object(P.jsx)(S.a,{variant:"contained",sx:{mt:3,ml:1},onClick:r,children:"Delete order"}),Object(P.jsx)(S.a,{variant:"contained",sx:{mt:3,ml:1},onClick:s,children:"Book order"})]})]})})]})})]})}var se=function(e){return Object(P.jsx)("div",{className:"floating-alerts",children:e.messages.map((function(e,t){return Object(P.jsx)("div",{className:"alert alert-success text-center floating-alert shadow-sm",children:e},t)}))})};var re=function(){var e={loggedIn:Boolean(localStorage.getItem("appToken")),flashMessages:[],user:{token:localStorage.getItem("appToken"),username:localStorage.getItem("appUsername"),role:localStorage.getItem("appRole")}},t=Object(j.a)((function(e,t){switch(t.type){case"login":return e.loggedIn=!0,void(e.user=t.data);case"logout":return void(e.loggedIn=!1);case"flashMessage":return void e.flashMessages.push(t.value)}}),e),a=Object(d.a)(t,2),s=a[0],r=a[1];Object(n.useEffect)((function(){s.loggedIn?(localStorage.setItem("appToken",s.user.token),localStorage.setItem("appUsername",s.user.username),localStorage.setItem("appRole",s.user.role)):(localStorage.removeItem("appToken"),localStorage.removeItem("appUsername"),localStorage.removeItem("appRole"))}),[s.loggedIn]),Object(n.useEffect)((function(){if(s.loggedIn){var e=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.a.post("/checkToken",{token:s.user.token},{cancelToken:t.token});case 3:e.sent.data||r({type:"logout"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("There was a problem or the request was cancelled.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=z.a.CancelToken.source();return e(),function(){return t.cancel()}}}),[]);var i="user"===s.user.role?Object(P.jsx)(V,{}):Object(P.jsx)(X,{});return Object(P.jsx)("div",{className:"App",children:Object(P.jsx)(b.Provider,{value:s,children:Object(P.jsx)(N.Provider,{value:r,children:Object(P.jsxs)(u.a,{children:[Object(P.jsx)(se,{messages:s.flashMessages}),Object(P.jsxs)(m.c,{children:[Object(P.jsx)(m.a,{path:"/",element:s.loggedIn?i:Object(P.jsx)(H,{})}),Object(P.jsx)(m.a,{path:"/signup",element:Object(P.jsx)(te,{})}),Object(P.jsx)(m.a,{path:"/details/:id",element:Object(P.jsx)(ne,{})})]})]})})})})},ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,234)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),r(e),i(e)}))};i.a.render(Object(P.jsx)(s.a.StrictMode,{children:Object(P.jsx)(re,{})}),document.getElementById("root")),ie()}},[[168,1,2]]]);
//# sourceMappingURL=main.04e9b561.chunk.js.map